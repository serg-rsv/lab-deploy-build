"use strict";(self.webpackChunklab_deploy_build=self.webpackChunklab_deploy_build||[]).push([[812],{332:function(e,t,a){a.d(t,{Z:function(){return s}});a(2791),a(7378);var n={btn:"Button_btn__W1TTO"},r=a(184),s=function(e){var t=e.children,a=e.onClick,s=e.className,i=e.buttonType,l=void 0===i?"button":i;return(0,r.jsx)("button",{type:l,className:[n.btn,s].join(" "),onClick:a,children:t})}},9321:function(e,t,a){a.d(t,{Z:function(){return n.Z}});var n=a(332)},9278:function(e,t,a){a.d(t,{Z:function(){return x}});var n=a(2791),r=a(9101),s=(a(7378),a(9321)),i=a(4164),l=function(e){var t=e.children,a=e.onKeyPress,s=(0,r.useSelector)((function(e){return e.modal.marker})),l=(0,n.useMemo)((function(){var e=document.createElement("div");return e.dataset.marker=s,e}),[s]),o=function(e){"Escape"===e.code&&a()};return(0,n.useEffect)((function(){return document.body.addEventListener("keydown",o,!0),document.body.appendChild(l),function(){document.body.removeEventListener("keydown",o,!0),document.body.removeChild(l)}})),(0,i.createPortal)(t,l)},o=a(2918),c="Modal_modalOverlay__6GnaJ",d="Modal_modalWindow__cPnWS",u="Modal_modalHeder__JUNE7",m="Modal_closeButton__3V9B-",h="Modal_modalBody__esMbS",p="Modal_modalFooter__2wrUh",_=a(184),x=function(e){var t=e.children,a=e.marker,n=e.headerContent,i=e.closeButton,x=e.leftButton,f=e.leftButtonStyle,v=e.leftButtonContent,j=void 0===v?"close":v,b=e.leftButtonClick,g=e.leftButtonType,N=e.rightButton,y=e.rightButtonStyle,P=e.rightButtonContent,C=void 0===P?"submit":P,k=e.rightButtonType,Z=e.rightButtonClick,w=(0,r.useSelector)((function(e){return e.modal.showModal})),A=(0,r.useSelector)((function(e){return e.modal.marker})),T=(0,o.d)().closeModal;return(0,_.jsx)(_.Fragment,{children:w&&A===a&&(0,_.jsx)(l,{onKeyPress:T,children:(0,_.jsx)("div",{className:c,onClick:T,children:(0,_.jsxs)("div",{className:d,onClick:function(e){return e.stopPropagation()},children:[(0,_.jsxs)("div",{className:u,children:[n,i&&(0,_.jsx)(s.Z,{onClick:T,className:m,children:(0,_.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",children:[(0,_.jsx)("title",{children:"close"}),(0,_.jsx)("path",{d:"M1 1L13 13"}),(0,_.jsx)("path",{d:"M1 13L13 1"})]})})]}),(0,_.jsx)("div",{className:h,children:t}),(0,_.jsxs)("div",{className:p,children:[x&&(0,_.jsx)(s.Z,{onClick:b,className:f,buttonType:g,children:j}),N&&(0,_.jsx)(s.Z,{onClick:Z,className:y,buttonType:k,children:C})]})]})})})})}},4772:function(e,t,a){a.d(t,{l:function(){return r}});var n=a(885),r=function(e){var t=new FormData,a=Object.entries(e).reduce((function(e,t){var a=(0,n.Z)(t,2),r=a[0],s=a[1];return e[r]=s,e}),[]);return Object.entries(a).forEach((function(e){var a=(0,n.Z)(e,2),r=a[0],s=a[1];t.append(r,s)})),t}},2918:function(e,t,a){a.d(t,{d:function(){return s}});var n=a(9101),r=a(6531),s=function(){var e=(0,n.useDispatch)();return{openModal:function(t){e((0,r.aZ)(t)),e((0,r.K4)(!0))},closeModal:function(){e((0,r.K4)(!1))}}}},5812:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var n=a(885),r=a(2791),s="PetsData_imgBox__oWAD0",i="PetsData_petAvatar__dnPgU",l="PetsData_wrapper__5Wbqj",o="PetsData_listItem__M5Z4+",c="PetsData_property__RJxWz",d="PetsData_text__38+Cf",u="PetsData_iconBtn__vTNCL",m=a(9321),h=(a(7378),a(6405)),p=h.u.injectEndpoints({endpoints:function(e){return{fetchPets:e.query({query:function(){return{url:"/pets"}},providesTags:["Pets"]}),createPet:e.mutation({query:function(e){return{url:"/pets",method:"POST",body:e}},invalidatesTags:["Pets"]}),deletePet:e.mutation({query:function(e){return{url:"/pets/".concat(e),method:"DELETE"}},invalidatesTags:["Pets"]})}}}),_=p.useFetchPetsQuery,x=p.useDeletePetMutation,f=p.useCreatePetMutation,v=a(2918),j=a(9278),b=a(184),g=function(e){var t=e.id,a=e.photoURL,r=e.name,h=e.birthday,p=e.breed,_=e.comments,f=(0,v.d)(),g=f.openModal,N=f.closeModal,y=x(),P=(0,n.Z)(y,1)[0];return(0,b.jsxs)("div",{className:l,children:[(0,b.jsx)("div",{className:s,children:(0,b.jsx)("img",{src:a,className:i,alt:"animal avatar"})}),(0,b.jsxs)("ul",{children:[(0,b.jsxs)("li",{className:o,children:[(0,b.jsx)("dd",{className:c,children:"Name: "}),(0,b.jsx)("dt",{className:d,children:r})]}),(0,b.jsxs)("li",{className:o,children:[(0,b.jsx)("dd",{className:c,children:"Date of birth: "}),(0,b.jsxs)("dt",{className:d,children:[" ",h.toString().slice(0,10)]})]}),(0,b.jsxs)("li",{className:o,children:[(0,b.jsx)("dd",{className:c,children:"Breed: "}),(0,b.jsxs)("dt",{className:d,children:[" ",p]})]}),(0,b.jsxs)("li",{className:o,children:[(0,b.jsx)("dd",{className:c,children:"Comments: "}),(0,b.jsxs)("dt",{className:d,children:[" ",_]})]})]}),(0,b.jsx)(m.Z,{className:u,onClick:function(){return g("pets")}}),(0,b.jsx)(j.Z,{marker:"pets",leftButtonClick:N,rightButtonClick:function(){return P(t)},children:"Do you realy want to delete pet?"})]})},N="PetsList_petsList__lcBm3",y="PetsList_text__iJscw",P=function(){var e=_(),t=e.data,a=e.error,n=e.isLoading;return console.log(a),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("ul",{children:a?(0,b.jsx)("p",{className:y,children:"Oh no, there was an error"}):n?(0,b.jsx)("p",{className:y,children:"Loading..."}):t?t.data.map((function(e){var t=e._id,a=e.photoURL,n=e.name,r=e.birthday,s=e.breed,i=e.comments;return(0,b.jsx)("li",{className:N,children:(0,b.jsx)(g,{id:t,photoURL:a,name:n,birthday:r,breed:s,comments:i})},t)})):null})})},C=a(4165),k=a(5861),Z=function(e){var t=e.onClick,a=e.dataActive,n=void 0!==a&&a,r=e.disabled,s=void 0!==r&&r;return(0,b.jsx)("button",{type:"submit","data-active":n,onClick:t,disabled:s})},w=a(9101),A=a(2627),T=a(963),B=a(332),M="LogOut_logOutBtn__a47T8",F="LogOut_logOutText__prlU8",D="LogOut_logOutModalText__8w6wb",U=function(){var e=(0,v.d)(),t=e.openModal,a=e.closeModal,r=(0,w.useDispatch)(),s=(0,T.useLogoutMutation)(),i=(0,n.Z)(s,1)[0],l=function(){var e=(0,k.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:r((0,A.unsetToken)()),r(h.u.util.resetApiState());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.Z,{onClick:function(){return t("logout")},className:M,children:(0,b.jsx)("p",{className:F,children:"Log Out"})}),(0,b.jsx)(j.Z,{leftButton:!0,leftButtonContent:"yes",leftButtonClick:l,rightButton:!0,rightButtonContent:"no",rightButtonClick:a,marker:"logout",children:(0,b.jsx)("p",{className:D,children:"Do you really want to quit?"})})]})},L={wrapper:"UserData_wrapper__pw+7Z",userImageWrapper:"UserData_userImageWrapper__LHlZx",userPhoto:"UserData_userPhoto__tqV3c",btnEditPhoto:"UserData_btnEditPhoto__hdlp-",editPhoto:"UserData_editPhoto__Jzc2-",userInfo:"UserData_userInfo__dp9Jc",list:"UserData_list__iQOIJ",listItem:"UserData_listItem__0Ge31",inputField:"UserData_inputField__IsWJt",inputFieldActive:"UserData_inputFieldActive__NKgSX",btnEdit:"UserData_btnEdit__cMnKF",btnEditActive:"UserData_btnEditActive__1RRRw",inputWrapper:"UserData_inputWrapper__un1aC"},E=function(){var e=(0,r.useState)(""),t=(0,n.Z)(e,2),a=t[0],s=t[1],i=(0,r.useState)(""),l=(0,n.Z)(i,2),o=l[0],c=l[1],d=(0,r.useState)("1989-04-10"),u=(0,n.Z)(d,2),m=u[0],h=u[1],p=(0,r.useState)(""),_=(0,n.Z)(p,2),x=_[0],f=_[1],v=(0,r.useState)(""),j=(0,n.Z)(v,2),g=j[0],N=j[1],y=(0,r.useState)(""),P=(0,n.Z)(y,2),w=P[0],A=P[1],B=(0,T.useCurrentQuery)().data,M=(0,T.useAvatarsMutation)(),F=(0,n.Z)(M,1)[0],D=(0,T.useEditMutation)(),E=(0,n.Z)(D,1)[0],S=(0,r.useRef)(a),I=(0,r.useRef)(o),W=(0,r.useRef)(m),q=(0,r.useRef)(x),O=(0,r.useRef)(g);function R(){var e=S.current!==a||I.current!==o||W.current!==m||q.current!==x||O.current!==g;return e&&(S.current=a,I.current=o,W.current=m,q.current=x,O.current=g),e}(0,r.useEffect)((function(){var e=function(){var e=(0,k.Z)((0,C.Z)().mark((function e(){var t,a,n,r,i,l,o;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===B||void 0===B||!B.user){e.next=9;break}return t=B.user,a=t.name,n=t.email,r=t.birthday,i=t.phone,l=t.location,o=t.photoURL,s(a),c(n),h(r.toString().slice(0,10)),f(i),N(l),A(o),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[B]);var V=function(){var e=(0,k.Z)((0,C.Z)().mark((function e(t){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.querySelectorAll('button[data-active="false"]').forEach((function(t){t.disabled=e}))},K=function(){var e=(0,k.Z)((0,C.Z)().mark((function e(t){var a,n,r,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,n=t.target.parentNode.querySelector("input"),r=a.dataset.active,n.classList.toggle(L.inputFieldActive),"false"!==r){e.next=10;break}return a.dataset.active="true",J(!0),n.disabled=!1,n.focus(),e.abrupt("return");case 10:if("true"!==r){e.next=16;break}return a.dataset.active="false",J(),n.disabled=!0,R()&&((s={})[n.name]=n.value,V(s)),e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,k.Z)((0,C.Z)().mark((function e(t){var a,n,r;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",t.target.files[0]),e.next=4,F(a);case 4:n=e.sent,r=n.data.photoURL,A(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":s(n);break;case"email":c(n);break;case"birthday":h(n);break;case"phone":f(n);break;case"location":N(n);break;default:return}};return(0,b.jsxs)("div",{className:L.wrapper,children:[(0,b.jsx)("div",{className:L.userImageWrapper,children:w&&(0,b.jsx)("img",{src:w,alt:"user avatar",className:L.userImg})}),(0,b.jsxs)("label",{className:L.btnEditPhoto,children:[(0,b.jsx)("input",{type:"file",name:"image",style:{display:"none"},onChange:z}),(0,b.jsx)("p",{className:L.editPhoto,children:"Edit photo"})]}),(0,b.jsxs)("div",{className:L.userInfo,children:[(0,b.jsxs)("ul",{className:L.list,children:[(0,b.jsxs)("li",{className:L.listItem,children:[(0,b.jsx)("label",{htmlFor:"name",className:L.listText,children:"Name:"}),(0,b.jsxs)("div",{className:L.inputWrapper,children:[(0,b.jsx)("input",{className:L.inputField,type:"text",onChange:Q,value:a,name:"name",disabled:!0,autoComplete:"off",onSubmit:K}),(0,b.jsx)(Z,{dataActive:!1,onClick:K})]})]}),(0,b.jsxs)("li",{className:L.listItem,children:[(0,b.jsxs)("label",{htmlFor:"email",className:L.listText,children:["Email:"," "]}),(0,b.jsxs)("div",{className:L.inputWrapper,children:[(0,b.jsx)("input",{className:L.inputField,type:"text",onChange:Q,autoComplete:"off",name:"email",value:o,disabled:!0}),(0,b.jsx)(Z,{dataActive:!1,onClick:K})]})]}),(0,b.jsxs)("li",{className:L.listItem,children:[(0,b.jsx)("label",{htmlFor:"birthday",className:L.listText,children:"Birthday:"}),(0,b.jsxs)("div",{className:L.inputWrapper,children:[(0,b.jsx)("input",{className:L.inputField,type:"date",onChange:Q,name:"birthday",value:m,disabled:!0}),(0,b.jsx)(Z,{dataActive:!1,onClick:K})]})]}),(0,b.jsxs)("li",{className:L.listItem,children:[(0,b.jsx)("label",{htmlFor:"phone",className:L.listText,children:"Phone:"}),(0,b.jsxs)("div",{className:L.inputWrapper,children:[(0,b.jsx)("input",{className:L.inputField,type:"text",onChange:Q,name:"phone",value:x,disabled:!0}),(0,b.jsx)(Z,{dataActive:!1,onClick:K})]})]}),(0,b.jsxs)("li",{className:L.listItem,children:[(0,b.jsx)("label",{htmlFor:"city",className:L.listText,children:"City:"}),(0,b.jsxs)("div",{className:L.inputWrapper,children:[(0,b.jsx)("input",{className:L.inputField,type:"text",onChange:Q,name:"location",value:g,disabled:!0}),(0,b.jsx)(Z,{dataActive:!1,onClick:K})]})]})]}),(0,b.jsx)(U,{})]})]})},S={section:"UserView_section__Y9Wxv",wrapper:"UserView_wrapper__NlL7n",titleInfo:"UserView_titleInfo__WFag0",titlePets:"UserView_titlePets__nIhfV",btnWrapper:"UserView_btnWrapper__DscZE",addPetText:"UserView_addPetText__Qn5ea",addPetBtn:"UserView_addPetBtn__tj4fs"},I=a(2506),W="modalAddPet_formBlock__CvXRY",q="modalAddPet_formTitle__NCFqZ",O="modalAddPet_addPetForm__yz8Xt",R="modalAddPet_addPetInputTitle__zXOa3",V="modalAddPet_addPetFormInput__kgbyo",J="modalAddPet_addPetFormInputDate__Wkw-5",K="modalAddPet_inputWrapper__ru8-g",z="modalAddPet_addPhotoPetTitle__h9Omg",Q="modalAddPet_photoAddIcon__ionAx",X="modalAddPet_addedImg__pq7o6",H="modalAddPet_photoPetInput__fqIkI",G="modalAddPet_textareaBlock__ku-NZ",Y="modalAddPet_addPetCommentsTitle__rdCNe",$="modalAddPet_addPetFormComments__KEMNX",ee="modalAddPet_inputError__ws239",te="modalAddPet_btnAccent__Ks0j0",ae="modalAddPet_btnSec__GF5M6",ne="modalAddPet_btnBlock__b6Xmj",re=a(4772),se=a(2797),ie=function(e){var t=e.onCancelButtonClick,a=f(),s=(0,n.Z)(a,1)[0],i=(0,r.useState)(!0),l=(0,n.Z)(i,2),o=l[0],c=l[1],d=(0,r.useState)(null),u=(0,n.Z)(d,2),m=u[0],h=u[1],p=function(){c(!o)},_=(0,I.TA)({initialValues:{name:"",birthday:"",breed:"",image:"",comments:""},validationSchema:se.Ry().shape({name:se.Z_().trim().required("Please enter name of your pet").matches(/^[aA-zZ\s]+$/,"Name contain only letters").min(2,"Name must be at least 2 characters").max(16,"Name must not exceed 16 characters"),birthday:se.hT().required("Please enter date of pet birth"),breed:se.Z_().required("Please enter breed of your pet").matches(/^[aA-zZ\s]+$/,"only letters").min(2,"Breed must be at least 2 characters").max(24,"Breed must not exceed 24 characters"),comments:se.Z_().required("Please enter").min(8,"Comment must be at least 8 characters").max(120,"Comment must not exceed 120 characters")}),onSubmit:function(){var e=(0,k.Z)((0,C.Z)().mark((function e(){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s((0,re.l)(_.values));case 2:_.resetForm(),t();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return(0,b.jsxs)("div",{className:W,children:[(0,b.jsx)("h2",{className:q,children:"Add pet"}),(0,b.jsxs)("form",{className:O,onSubmit:_.handleSubmit,children:[o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("label",{className:R,htmlFor:"name",children:"Name pet"}),""!==_.values.name&&_.errors.name?(0,b.jsx)("p",{className:ee,children:_.errors.name}):null,(0,b.jsx)("input",{className:V,id:"name",name:"name",type:"text",onChange:_.handleChange,value:_.values.name,placeholder:"Type name pet"}),(0,b.jsx)("label",{className:R,htmlFor:"birth",children:"Date of birth"}),""!==_.values.birth&&_.errors.birth?(0,b.jsx)("p",{className:ee,children:_.errors.birth}):null,(0,b.jsx)("input",{className:J,id:"birthdayPet",name:"birthday",type:"date",onChange:_.handleChange,value:_.values.birthday}),(0,b.jsx)("label",{className:R,htmlFor:"breed",children:"Breed"}),_.values.breed&&_.errors.breed?(0,b.jsx)("p",{className:ee,children:_.errors.breed}):null,(0,b.jsx)("input",{className:V,id:"breed",name:"breed",type:"text",onChange:_.handleChange,value:_.values.breed,placeholder:"Type breed pet"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("fieldset",{className:K,children:[(0,b.jsx)("legend",{className:z,children:"Load photo and some comments"}),""===_.values.image?(0,b.jsxs)("label",{className:Q,htmlFor:"imagePet",children:[(0,b.jsx)("svg",{width:"51",height:"51",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M25.5 49.166V25.5m0 0V1.833m0 23.667h23.667m-23.667 0H1.834",stroke:"#111",strokeOpacity:".6",strokeWidth:"2",strokeLinecap:"round"})}),(0,b.jsx)("input",{className:H,id:"imagePet",name:"image",type:"file",onChange:function(e){_.handleChange(e),function(e){e.currentTarget.files&&e.currentTarget.files[0]&&(h(URL.createObjectURL(e.target.files[0])),_.setFieldValue("image",e.currentTarget.files[0]))}(e)}})]}):(0,b.jsx)("div",{className:X,children:(0,b.jsx)("img",{alt:"pet",src:m})})]}),(0,b.jsxs)("div",{className:G,children:[(0,b.jsx)("label",{className:Y,htmlFor:"comments",children:"Comments"}),""!==_.values.comments&&_.errors.comments?(0,b.jsx)("p",{className:ee,children:_.errors.comments}):null,(0,b.jsx)("textarea",{className:$,id:"comments",name:"comments",type:"text",onChange:_.handleChange,value:_.values.comments})]})]}),o&&(0,b.jsxs)("div",{className:ne,children:[(0,b.jsx)(B.Z,{children:"Cancel",onClick:t,className:te}),(0,b.jsx)(B.Z,{children:"Next",onClick:p,className:ae})]}),!o&&(0,b.jsxs)("div",{className:ne,children:[(0,b.jsx)(B.Z,{children:"Back",onClick:p,className:te}),(0,b.jsx)(B.Z,{children:"Done",buttonType:"submit",className:ae})]})]})]})},le=function(){var e=(0,v.d)(),t=e.openModal,a=e.closeModal;return(0,b.jsxs)("section",{className:["container",S.wrapper].join(" "),children:[(0,b.jsx)("h2",{className:S.titleInfo,children:"My information:"}),(0,b.jsx)(E,{}),(0,b.jsx)("h2",{className:S.titlePets,children:"My pets:"}),(0,b.jsxs)("div",{className:S.btnWrapper,children:[(0,b.jsx)("p",{className:S.addPetText,children:"Add pet "}),(0,b.jsx)(m.Z,{className:S.addPetBtn,onClick:function(){t("addpet")}})]}),(0,b.jsx)(P,{}),(0,b.jsx)(j.Z,{marker:"addpet",closeButton:!0,children:(0,b.jsx)(ie,{onCancelButtonClick:a})})]})},oe=function(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(le,{})})}},963:function(e,t,a){a.r(t),a.d(t,{useAvatarsMutation:function(){return c},useCurrentQuery:function(){return o},useEditMutation:function(){return i},useLoginMutation:function(){return s},useLogoutMutation:function(){return l},useRegisterMutation:function(){return r}});var n=a(6405).u.injectEndpoints({endpoints:function(e){return{register:e.mutation({query:function(e){return{url:"/users/register",method:"POST",body:e}}}),login:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:e}}}),edit:e.mutation({query:function(e){return{url:"/users/edit",method:"PATCH",body:e}},invalidatesTags:["User"]}),logout:e.mutation({query:function(e){return"/users/logout"}}),current:e.query({query:function(){return"/users/current"},providesTags:["User"]}),avatars:e.mutation({query:function(e){return{url:"/users/avatars",method:"PATCH",body:e}},invalidatesTags:["User"]})}},overrideExisting:!1}),r=n.useRegisterMutation,s=n.useLoginMutation,i=n.useEditMutation,l=n.useLogoutMutation,o=n.useCurrentQuery,c=n.useAvatarsMutation}}]);
//# sourceMappingURL=812.eecead86.chunk.js.map