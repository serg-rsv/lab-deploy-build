"use strict";(self.webpackChunklab_deploy_build=self.webpackChunklab_deploy_build||[]).push([[221],{332:function(r,e,n){n.d(e,{Z:function(){return s}});n(2791),n(7378);var o={btn:"Button_btn__W1TTO"},a=n(184),s=function(r){var e=r.children,n=r.onClick,s=r.className,t=r.buttonType,i=void 0===t?"button":t;return(0,a.jsx)("button",{type:i,className:[o.btn,s].join(" "),onClick:n,children:e})}},1221:function(r,e,n){n.r(e),n.d(e,{default:function(){return w}});var o=n(4165),a=n(5861),s=n(885),t=n(1087),i=n(2791),u=n(2506),l=n(4439),m=n(2797),c=n(332),d=n(184),p=n(1087).useNavigate,h=n(963).useRegisterMutation,f=n(9101).useDispatch,_=n(2627).setToken,g=function(){var r=(0,i.useState)(!0),e=(0,s.Z)(r,2),n=e[0],g=e[1],w=h(),Z=(0,s.Z)(w,2),v=Z[0],P=Z[1].isLoading,E=f(),x=p(),N=function(){g(!n)},b=(0,u.TA)({initialValues:{email:"",password:"",confirmPassword:"",name:"",location:"",phone:""},validationSchema:m.Ry().shape({email:m.Z_().email("Email address is invalid").required("Please enter"),password:m.Z_().required("Please enter").min(7,"Password must be at least 7 characters").max(32,"Password must not exceed 32 characters"),confirmPassword:m.Z_().required("Please enter").oneOf([m.iH("password"),null],"Confirm Password does not match"),name:m.Z_().required("Please enter").matches(/^[aA-zZ\s]+$/,"Name contain only letters"),location:m.Z_().required("Please enter").matches(/([A-Za-z]+(?: [A-Za-z]+)*),? ([A-Za-z]{2})/,"Enter by type: City, Region"),phone:m.Z_().required("Please enter").matches(/^\+380\d{9}$/,"Invalid phone number")}),onSubmit:function(){var r=(0,a.Z)((0,o.Z)().mark((function r(e){var n,a,s,t,i,u,l;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.email,a=e.password,s=e.name,t=e.phone,i=e.location,r.prev=1,r.next=4,v({email:n,password:a,name:s,phone:t,location:i});case 4:u=r.sent,l=u.data.token,E(_(l)),x("/home"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),alert.error("Something went wrong. Maybe this email is already in use");case 13:b.resetForm();case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()});return(0,d.jsxs)("div",{className:l.Z.formBlock,children:[(0,d.jsx)("h2",{className:l.Z.formTitle,children:"Registration"}),(0,d.jsxs)("form",{className:l.Z.registerForm,onSubmit:b.handleSubmit,children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{className:l.Z.formInput,id:"email",name:"email",type:"email",onChange:b.handleChange,value:b.values.email,placeholder:"Email"}),""!==b.values.email&&b.errors.email?(0,d.jsx)("p",{className:l.Z.inputErrorEmail,children:b.errors.email}):null,b.touched.email&&b.errors.email?(0,d.jsx)("p",{className:l.Z.inputErrorEmail,children:b.errors.email}):null,(0,d.jsx)("input",{className:l.Z.formInput,id:"password",name:"password",type:"password",onChange:b.handleChange,value:b.values.password,placeholder:"Password"}),""!==b.values.password&&b.errors.password?(0,d.jsx)("p",{className:l.Z.inputErrorPassword,children:b.errors.password}):null,b.touched.password&&b.errors.password?(0,d.jsx)("p",{className:l.Z.inputErrorPassword,children:b.errors.password}):null,(0,d.jsx)("input",{className:l.Z.formInput,id:"confirmPassword",name:"confirmPassword",type:"confirmPassword",onChange:b.handleChange,value:b.values.confirmPassword,placeholder:"Confirm Password"}),""!==b.values.confirmPassword&&b.errors.confirmPassword?(0,d.jsx)("p",{className:l.Z.inputErrorConfirmPassword,children:b.errors.confirmPassword}):null,b.touched.confirmPassword&&b.errors.confirmPassword?(0,d.jsx)("p",{className:l.Z.inputErrorConfirmPassword,children:b.errors.confirmPassword}):null]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{className:l.Z.formInput,id:"name",name:"name",type:"name",onChange:b.handleChange,value:b.values.name,placeholder:"Name"}),""!==b.values.name&&b.errors.name?(0,d.jsx)("p",{className:l.Z.inputErrorName,children:b.errors.name}):null,b.touched.name&&b.errors.name?(0,d.jsx)("p",{className:l.Z.inputErrorName,children:b.errors.name}):null,(0,d.jsx)("input",{className:l.Z.formInput,id:"location",name:"location",type:"location",onChange:b.handleChange,value:b.values.location,placeholder:"City, region"}),""!==b.values.location&&b.errors.location?(0,d.jsx)("p",{className:l.Z.inputErrorLocation,children:b.errors.location}):null,b.touched.location&&b.errors.location?(0,d.jsx)("p",{className:l.Z.inputErrorLocation,children:b.errors.location}):null,(0,d.jsx)("input",{className:l.Z.formInput,id:"phone",name:"phone",type:"phone",onChange:b.handleChange,value:b.values.phone,placeholder:"Mobile phone"}),""!==b.values.phone&&b.errors.phone?(0,d.jsx)("p",{className:l.Z.inputErrorPhone,children:b.errors.phone}):null,b.touched.phone&&b.errors.phone?(0,d.jsx)("p",{className:l.Z.inputErrorPhone,children:b.errors.phone}):null]}),n&&(0,d.jsx)("div",{className:l.Z.btnBlock,children:(0,d.jsx)(c.Z,{children:"Next",onClick:N,className:l.Z.formBtn})}),!n&&(0,d.jsxs)("div",{className:l.Z.btnBlock,children:[(0,d.jsx)(c.Z,{children:"Register",className:l.Z.formBtn,buttonType:"submit",disabled:P}),(0,d.jsx)(c.Z,{children:"Back",className:l.Z.formBtnBck,onClick:N,disabled:P})]})]}),(0,d.jsxs)("p",{className:l.Z.linkToPage,children:["Already have an account?"," ",(0,d.jsx)(t.Link,{className:l.Z.link,to:"/login",children:"Login"})]})]})},w=function(){return(0,d.jsx)(g,{})}},963:function(r,e,n){n.r(e),n.d(e,{useAvatarsMutation:function(){return l},useCurrentQuery:function(){return u},useEditMutation:function(){return t},useLoginMutation:function(){return s},useLogoutMutation:function(){return i},useRegisterMutation:function(){return a}});var o=n(6405).u.injectEndpoints({endpoints:function(r){return{register:r.mutation({query:function(r){return{url:"/users/register",method:"POST",body:r}}}),login:r.mutation({query:function(r){return{url:"/users/login",method:"POST",body:r}}}),edit:r.mutation({query:function(r){return{url:"/users/edit",method:"PATCH",body:r}},invalidatesTags:["User"]}),logout:r.mutation({query:function(r){return"/users/logout"}}),current:r.query({query:function(){return"/users/current"},providesTags:["User"]}),avatars:r.mutation({query:function(r){return{url:"/users/avatars",method:"PATCH",body:r}},invalidatesTags:["User"]})}},overrideExisting:!1}),a=o.useRegisterMutation,s=o.useLoginMutation,t=o.useEditMutation,i=o.useLogoutMutation,u=o.useCurrentQuery,l=o.useAvatarsMutation},4439:function(r,e){e.Z={formBlock:"authForm_formBlock__1ySqq",formTitle:"authForm_formTitle__kG3g2",registerForm:"authForm_registerForm__jQ767",loginForm:"authForm_loginForm__s5wPX",formInput:"authForm_formInput__7KbGC",inputErrorPhone:"authForm_inputErrorPhone__26x35",inputErrorLocation:"authForm_inputErrorLocation__pKJCM",inputErrorName:"authForm_inputErrorName__i9xIe",inputErrorConfirmPassword:"authForm_inputErrorConfirmPassword__inhRB",inputLoginErrorPassword:"authForm_inputLoginErrorPassword__1CZq9",inputErrorPassword:"authForm_inputErrorPassword__bGQhO",inputLoginErrorEmail:"authForm_inputLoginErrorEmail__5HuH4",inputErrorEmail:"authForm_inputErrorEmail__zuBJV",formBtn:"authForm_formBtn__pBtde",btnBlock:"authForm_btnBlock__OtIl3",formBtnBck:"authForm_formBtnBck__EC-3Y",linkToPage:"authForm_linkToPage__vpbWC",link:"authForm_link__0cb4+"}}}]);
//# sourceMappingURL=221.2ab2f996.chunk.js.map